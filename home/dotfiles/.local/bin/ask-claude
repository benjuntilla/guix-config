#!/usr/bin/env fish

set tmpfile (mktemp)

ghostty --class=ask-claude --title=ask-claude -e bash -c "gum write --placeholder 'Ask Claude...' > $tmpfile"

if test -z (string collect < $tmpfile)
    rm $tmpfile
    exit 0
end

set encoded_prompt (python3 -c 'import sys, urllib.parse; print(urllib.parse.quote(open(sys.argv[1]).read()))' "$tmpfile")
rm $tmpfile

xdg-open "https://claude.ai/new?q=$encoded_prompt" &
